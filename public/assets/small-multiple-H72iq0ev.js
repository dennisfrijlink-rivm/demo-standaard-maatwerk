import{x as Y}from"./figure-loader-CJ93ISYx.js";import{H as B}from"./base-chart-B_j4OqMu.js";import"./base-D-To3aZf.js";import"./base-figure-u1I5xRLa.js";function I(u,g){const f=u.map(t=>t.name||"no name"),d={yAxisTitleHeight:15,xAxisLabelHeight:15,verticalSpacing:50,horizontalSpacing:20,defaultSubplotWidth:180,defaultSubplotHeight:100,topOffset:0,maxYScale:1.4,yAxisLabelOffset:3.5};function b(t,i,e=230){const a=Math.floor(t/e),o=Math.min(Math.max(1,a),i),n=Math.ceil(i/o);return{columns:o,rows:n}}function M(t,i,e,a,o,n,l){const{horizontalSpacing:c,verticalSpacing:s,xAxisLabelHeight:r,yAxisLabelWidth:p,yAxisTitleHeight:h,topOffset:x}=o;return{left:n[3]+p+t*(p+e+c),top:n[0]+l+x+i*(h+a+r+s)}}function O(t){return Math.ceil(Math.max(...t.yAxis.map(i=>{var e;return((e=i.labelGroup)==null?void 0:e.getBBox().width)||0})))}function y(t){const{defaultSubplotWidth:i,defaultSubplotHeight:e,horizontalSpacing:a,maxYScale:o,yAxisTitleHeight:n,xAxisLabelHeight:l,yAxisLabelOffset:c}=d,s=t.chartWidth-t.spacing[1]-t.spacing[3],{columns:r}=b(s,t.series.length,i),p=O(t)+c,h=e-n-l,x=a*(r-1),w=(s-x)/r-p,S=Math.floor(Math.min(i*o,w)),v={...d,yAxisLabelWidth:p},T=(m,A=!1)=>({...m,width:S,height:h,offset:0,...A?{gridLineWidth:1,title:{reserveSpace:!0,offset:0,textAlign:"left",align:"high",rotation:0,y:-10,style:{whiteSpace:"nowrap"}}}:{labels:{autoRotation:0,style:{fontSize:"12px",fontWeight:"normal"},y:18},rotation:0}}),W=(m,A=!1)=>{m.forEach((C,H)=>{const k=H%r,z=Math.floor(H/r),P=M(k,z,S,h,v,t.spacing,t.plotTop);C.update(T(P,A),!1)})};W(t.xAxis,!1),W(t.yAxis,!0)}function L(t){const{defaultSubplotWidth:i,defaultSubplotHeight:e,verticalSpacing:a,topOffset:o}=d,n=t.chartWidth-t.spacing[1]-t.spacing[3],{rows:l}=b(n,t.series.length,i),c=o+l*e+(l-1)*a,s=Math.ceil(t.spacing[0]+t.spacing[2]+t.plotTop+c);y(t),t.redraw(),y(t),t.setSize(t.chartWidth,s-30)}return{chart:{type:"column",spacingBottom:60,animation:!1,marginLeft:0,marginRight:0,events:{load:function(){L(this)}}},plotOptions:{column:{borderWidth:0,grouping:!1,groupPadding:.05,pointPadding:.05}},tooltip:{shared:!0,followPointer:!0,followTouchMove:!0},xAxis:Array(u.length).fill(null).map(()=>({type:"datetime",startOnTick:!0,endOnTick:!0,crosshair:!0,xlineWidth:1,tickPixelInterval:100,xtickWidth:1,tickLength:4,xtickColor:"#535353",labels:{format:"{value:%Y}"}})),yAxis:f.map(t=>({tickAmount:5,endOnTick:!0,min:g.yMin||0,max:g.yMax||null,title:{text:t},gridLineWidth:1,labels:{distance:5}})),series:u.map((t,i)=>({...t,xAxis:i,yAxis:i})),legend:{enabled:!1}}}class F extends B{async getChartOptions(){const{series:g}=await this.getSeriesData(),f=I(g,this.options);return this.mergeOptions(await super.getChartOptions(),f)}render(){return Y` ${super.render()}`}}export{F as HighchartsSmallMultiple};
