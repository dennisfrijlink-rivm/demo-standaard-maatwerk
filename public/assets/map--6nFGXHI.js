const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/map-D8n5ivAp.js","assets/figure-loader-CJ93ISYx.js"])))=>i.map(i=>d[i]);
import{f as I,_ as S,a as k}from"./figure-loader-CJ93ISYx.js";import{H as C}from"./base-D-To3aZf.js";import"./base-figure-u1I5xRLa.js";function q(n){return n.slice().sort(function(e,t){return e-t})}function N(n){if(n.length===0)throw new Error("min requires at least one data point");for(var e=n[0],t=1;t<n.length;t++)n[t]<e&&(e=n[t]);return e}function E(n){if(n.length===0)throw new Error("max requires at least one data point");for(var e=n[0],t=1;t<n.length;t++)n[t]>e&&(e=n[t]);return e}function D(n,e){for(var t=[],r=0;r<n;r++){for(var a=[],o=0;o<e;o++)a.push(0);t.push(a)}return t}function M(n){for(var e=0,t,r=0;r<n.length;r++)(r===0||n[r]!==t)&&(t=n[r],e++);return e}function d(n,e,t,r){var a;if(n>0){var o=(t[e]-t[n-1])/(e-n+1);a=r[e]-r[n-1]-(e-n+1)*o*o}else a=r[e]-t[e]*t[e]/(e+1);return a<0?0:a}function w(n,e,t,r,a,o,i){if(!(n>e)){var s=Math.floor((n+e)/2);r[t][s]=r[t-1][s-1],a[t][s]=s;var l=t;n>t&&(l=Math.max(l,a[t][n-1]||0)),l=Math.max(l,a[t-1][s]||0);var h=s-1;e<r[0].length-1&&(h=Math.min(h,a[t][e+1]||0));for(var f,v,u,p,c=h;c>=l&&(f=d(c,s,o,i),!(f+r[t-1][l-1]>=r[t][s]));--c)v=d(l,s,o,i),u=v+r[t-1][l-1],u<r[t][s]&&(r[t][s]=u,a[t][s]=l),l++,p=f+r[t-1][c-1],p<r[t][s]&&(r[t][s]=p,a[t][s]=c);w(n,s-1,t,r,a,o,i),w(s+1,e,t,r,a,o,i)}}function _(n,e,t){for(var r=e[0].length,a=n[Math.floor(r/2)],o=[],i=[],s=0,l=void 0;s<r;++s)l=n[s]-a,s===0?(o.push(l),i.push(l*l)):(o.push(o[s-1]+l),i.push(i[s-1]+l*l)),e[0][s]=d(0,s,o,i),t[0][s]=0;for(var h,f=1;f<e.length;++f)f<e.length-1?h=f:h=r-1,w(h,r-1,f,e,t,o,i)}function O(n,e){if(e>n.length)throw new Error("cannot generate more classes than there are data values");var t=q(n),r=M(t);if(r===1)return[t];var a=D(e,t.length),o=D(e,t.length);_(t,a,o);for(var i=[],s=o[0].length-1,l=o.length-1;l>=0;l--){var h=o[l][s];i[l]=t.slice(h,s+1),l>0&&(s=h-1)}return i}function P(n,e,t){var r=n.length,a=[],o=t;for(a[t]=n[n.length-1];o>0;)a[o-1]=n[e[r][o]-1],r=e[r][o]-1,o--;return a}function W(n,e){var t=[],r=[],a,o,i=0;for(a=0;a<n.length+1;a++){var s=[],l=[];for(o=0;o<e+1;o++)s.push(0),l.push(0);t.push(s),r.push(l)}for(a=1;a<e+1;a++)for(t[1][a]=1,r[1][a]=0,o=2;o<n.length+1;o++)r[o][a]=Number.POSITIVE_INFINITY;for(var h=2;h<n.length+1;h++){for(var f=0,v=0,u=0,p=0,c=1;c<h+1;c++){var m=h-c+1,y=n[m-1];if(u++,f+=y,v+=y*y,i=v-f*f/u,p=m-1,p!==0)for(o=2;o<e+1;o++)r[h][o]>=i+r[p][o-1]&&(t[h][o]=m,r[h][o]=i+r[p][o-1])}t[h][1]=1,r[h][1]=i}return{lowerClassLimits:t,varianceCombinations:r}}function $(n,e){if(e>n.length)return null;n=n.slice().sort(function(a,o){return a-o});var t=W(n,e),r=t.lowerClassLimits;return P(n,r,e)}function j(n,e){if(n.length<2)return n;for(var t=N(n),r=E(n),a=[t],o=(r-t)/e,i=1;i<e;i++)a.push(a[0]+o*i);return a.push(r),a}function z(n,e,t=5,r=[]){if(!Array.isArray(n)||n.length===0)throw new Error("Data must be a non-empty array of numbers.");const a=[...n].sort((o,i)=>o-i);switch(e){case"equalInterval":return j(a,t);case"quantile":{const o=[a[0]];for(let i=1;i<t;i++){const s=Math.floor(i*(a.length/t));o.push(a[s])}return o.push(a[a.length-1]),Array.from(new Set(o)).sort((i,s)=>i-s)}case"jenks":return $(a,t);case"ckmeans":{const o=O(a,t),i=o.map(l=>l[0]),s=o[o.length-1].slice(-1)[0];return[...i,s]}case"manual":if(!r||r.length<2)throw new Error("Manual breaks must be an array with at least two values.");return r.slice().sort((o,i)=>o-i);default:throw new Error(`Unknown method: ${e}`)}}async function T(n,e){const t={};return await Promise.all(n.map(async r=>{const a=r==="nl"?"nl":`${r}_${e}`;t[r]=await I(`./assets/shapes/${a}.geojson`)})),t}function A(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function H(n,e="equalInterval",t=5,r,a=1,o="nl"){if(!Array.isArray(n)||n.length===0)throw new Error("Data must be a non-empty array of numbers.");const i=Array.isArray(e)?e:z(n,e,t);if(i.length<2)throw new Error("At least two breakpoints are required to create data classes.");const s=new Intl.NumberFormat(o,{minimumFractionDigits:a,maximumFractionDigits:a}),l=i.length-1,h=[];for(let f=0;f<l;f++){const v=A(i[f],a),u=A(i[f+1],a),p=`${s.format(v)} â€“ ${s.format(u)}`,c=r[f];h.push({from:v,to:u,name:p,color:c})}return h}function F(n,e){return{chart:{style:{fontFamily:"RO Sans, Arial, sans-serif"},backgroundColor:"#ffffff",margin:[50,0,35,80],height:530},colors:["#f2e0ff","#ceb2e0","#ab89c2","#8b65a4","#6d4786","#512e68"],colorAxis:{maxColor:"#007bc7",minColor:"#dbebf5",dataClasses:e},legend:{title:{style:{fontSize:"14px",fontWeight:"normal",color:"#154273"},text:n.legendTitle||"ffff"},layout:"vertical",verticalAlign:"top",align:"left",y:50,backgroundColor:"#ffffff",padding:2,squareSymbol:!1,symbolWidth:24,symbolHeight:12,symbolRadius:0,itemStyle:{fontWeight:"normal",fontSize:"12px",color:"#333333"},itemHoverStyle:{color:"#333333"},itemHiddenStyle:{color:"#c8c8c8",textDecoration:"none"}},mapNavigation:{enableMouseWheelZoom:!1,enabled:!0,enableButtons:!1},plotOptions:{series:{allowPointSelect:!1,animation:{duration:800},states:{select:{enabled:!1,lineWidth:null},normal:{animation:!1},hover:{lineWidthPlus:1.5,borderColor:"#ffffff",halo:{size:0},animation:{duration:0}},inactive:{enabled:!1}}}}}}const b=class b extends C{handleZoomChange(e){this.highchartsChart.mapView.zoomBy(e.detail)}handleZoomReset(){this.highchartsChart.zoomOut()}async loadHighchartsModules(e){return await super.loadHighchartsModules(e),await S(()=>import("./map-D8n5ivAp.js").then(t=>t.m),__vite__mapDeps([0,1])),e}async getChartOptions(){const e=await this.getDataClasses(),t=F(this.options,e);return this.mergeOptions(await super.getChartOptions(),t)}async getDataClasses(){var a,o,i,s;const{dataSet:e,mapKey:t}=this.options,r=e.map(l=>Number(l[t]));return H(r,((a=this.options)==null?void 0:a.mapDataClassesMethod)??"equalInterval",((o=this.options)==null?void 0:o.mapDataClassesCount)??4,((i=this.options)==null?void 0:i.colorSchemeArray)??[],1,((s=this.options)==null?void 0:s.lang)??"nl")}};b.styles=k`
        ${C.styles}
        .highcharts-legend-item .highcharts-point {
            stroke: #000000;
            stroke-width: 0.9px;
        }
    `;let g=b;function R(n,e){return{chart:{map:e.gm},accessibility:{typeDescription:"Map of the Netherlands"},colorAxis:{tickPixelInterval:100},series:[{type:"map",data:n.dataSet.map(t=>({code:t[n.mapDivisionKey],value:Number(t[n.mapKey])})),joinBy:["gm_code","code"],name:"Data"},{name:"Provincies",data:e.pv.features,type:"mapline",lineWidth:.8,nullColor:"#333333",enableMouseTracking:!1},{name:"Grenzen Nederland",data:e.nl.features,type:"mapline",lineWidth:1.4,nullColor:"#333333",enableMouseTracking:!1}]}}class G extends g{async connectedCallback(){await super.connectedCallback();const e=["nl",this.options.mapDivisionCode,this.options.mapOutline].filter(r=>typeof r=="string"&&r.length>0),t=await T(e,this.options.mapDivisionYear);this.geojson=t,this.requestUpdate()}async getChartOptions(){const e=R(this.options,this.geojson);return this.mergeOptions(await super.getChartOptions(),e)}static get styles(){return k`
            ${g.styles}
            .highcharts-legend-item .highcharts-point {
                stroke: #000000;
                stroke-width: 0.9px;
            }
        `}}export{G as HighchartsMap};
